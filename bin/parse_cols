#!/usr/bin/env jq-sh

opts --null-input --compact-output

arg_array cols "$@"


__JQ__


def new_col:
  capture(
    "
      (?<key>[a-zA-Z][^ %:]*)
      (%(?<truncation>[0-9]+))?
      ((?<heading>:[a-zA-Z][^ ]*))?
    ";
    "x"
  ) |
  .key as $key |
  if .truncation then .truncation |= tonumber else .                end |
  if .heading    then .                       else .heading |= $key end
;


$cols | map(new_col)
